<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <link th:href="@{/css/common.css}" rel="stylesheet" />
    <link th:href="@{/css/list.css}" rel="stylesheet" />
</head>
<style>
</style>
<body>
    리스트 내역
    <div class="listDiv">
        <form id="form" th:action="@{/list/deleteFood}" th:method="post">
            <p id="globalErr" class="text-error inlineLeft"></p>
            <div>
                <p th:text="|${listsDto.name}(${listsDto.totalCnt})|" class="fw-600 inlineLeft"></p>
                <p class="inlineRight">
                    <input type="submit" value="리스트에서 제거">
                </p>
                <p style="clear: both;"></p>
            </div>
            <div style="margin: 0.2rem 1rem;">
                <div class="preview" th:each="food : ${foodList}">
                    <img id="preview-thumbnail" class="w150 inlineLeft" th:src="|/picture/${food.foodPictureDtos[0].storedFileName}|"
                         th:onclick="|location.href='@{/food/{foodId} (foodId=${food.id})}'|" style="cursor: pointer;">
                    <div class="inlineLeft">
                        <h5 th:text="${food.storeName}" th:onclick="|location.href='@{/food/{foodId} (foodId=${food.id})}'|"
                            style="cursor: pointer; margin: 10px">가게 이름</h5>
                        <p style="margin: 5px 0 0 8px; text-align: left;">
                            <span style="color: #ffc107">★</span>
                            <span th:text="${food.score}">점수</span>
                        </p>
                        <p th:text="${food.categoryNameStr}" style="margin: 2px 0 0 8px; text-align: left;">카테고리</p>
                    </div>
                    <div class="inlineRight" style="margin-top: 78px;">
                       <input type="checkbox" th:name="deleteFoodIds" th:value="${food.id}">
                    </div>
                </div>
            </div>
            <div style="text-align: center;" th:with="size = ${paging.size}, listId = ${listsDto.id}">
                <input type="hidden" name="size" th:value="${size}">
                <input type="hidden" name="page" th:value="${paging.currNum}">
                <input type="hidden" name="listId" th:value="${listId}">
                <span class="mr1r" th:with="num = ${paging.startNum - 1}">
                    <a th:onclick="|location.href='@{/list/{listId}?page={page}&size={size} (listId=${listId}, page=${num}, size=${size})}'|"
                       th:class="${paging.first} ? 'disabled link' : 'link'" >&lt;</a>
                </span>
                <span th:each="num : ${#numbers.sequence(paging.startNum, paging.endNum)}" class="mr1r">
                    <span th:if="${num == paging.currNum}" th:text="${num + 1}" class="fw-bold cursor-default"></span>
                    <span th:if="${num != paging.currNum}">
                        <a th:onclick="|location.href='@{/list/{listId}?page={page}&size={size} (listId=${listId}, page=${num}, size=${size})}'|"
                           th:text="${num + 1}" class="link">1</a>
                    </span>
                </span>
                <span th:with="num = ${paging.endNum + 1}">
                    <a th:onclick="|location.href='@{/list/{listId}?page={page}&size={size} (listId=${listId}, page=${num}, size=${size})}'|"
                       th:class="${paging.last || paging.totalNum <= num} ? 'disabled link' : 'link'">&gt;</a>
                </span>
            </div>
        </form>
    </div>
    <script th:src="@{/js/list.js}"></script>
</body>
</html>